<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:local="clr-namespace:Keyboard"
             xmlns:bottomsheet="http://pluginmauibottomsheet.com"
             x:Class="Keyboard.KeyboardHexadecimal"
             Appearing="ContentPage_Appearing"
             Disappearing="ContentPage_Disappearing"
             Loaded="OnPageLoaded"
             Shell.BackgroundColor="{AppThemeBinding Light=LightBlue, Dark=Blue}">

    <Shell.TitleView>
        <Grid
            ColumnDefinitions="*, 60, 60"
            RowDefinitions="*"
            Padding="0">

            <Label
                Grid.Column="0"
                Grid.Row="0"
                HorizontalOptions="Start"
                VerticalOptions="Center"
                FontSize="16"  
                FontAttributes="Bold"  
                Margin="10"
                TextColor="{AppThemeBinding Light={StaticResource Black}, Dark={StaticResource White}}"
                Text="Keyboard hexadecimal">
            </Label>

            <ImageButton
                x:Name="imgbtnToggleKeyboard"
                Style="{StaticResource ToggleKeyboardImageButton}"
                Grid.Column="2"  
                Grid.Row="0"
                HorizontalOptions="End"
                VerticalOptions="Center"
                Margin="10"
                Clicked="ImgbtnToggleKeyboard_Clicked">
            </ImageButton>
        </Grid>
    </Shell.TitleView>

    <StackLayout>
        <!--!!!BUG!!! VerticalOptions must be set to "FillAndExpand" - with only "Fill" scrolling does not work
        https://www.youtube.com/watch?v=Lb8xZ_jHTjY ; https://www.youtube.com/watch?v=Lb8xZ_jHTjY -->
        <ScrollView
            VerticalScrollBarVisibility="Always"
            VerticalOptions="FillAndExpand">

            <Grid
                ColumnDefinitions="*, *"
                RowDefinitions="Auto, Auto, Auto, Auto, Auto, 100"
                ColumnSpacing="2"  
                RowSpacing="10"  
                Margin="5">


                <Border  
                    x:Name="brdValue1"
                    Grid.Column="0"
                    Grid.Row="1">

                    <Entry  
                        x:Name="entTest1" 
                        AutomationId="entTest1-Percentage"
                        FontSize="16"
                        FontAttributes="Bold"
                        Placeholder="0 - FF"
                        Text=""
                        TextChanged="NumberEntryTextChanged"
                        Focused="NumberEntryFocused"  
                        Unfocused="NumberEntryUnfocused">
                        <Entry.Triggers>
                            <EventTrigger Event="TextChanged">
                                <local:HexadecimalValidationTriggerAction MinValue="0" MaxValue="FF" BorderName="brdValue1"/>
                            </EventTrigger>
                        </Entry.Triggers>
                    </Entry>
                </Border>

                <Border  
                    x:Name="brdValue2"
                    Grid.Column="0"
                    Grid.Row="2">

                    <Entry  
                        x:Name="entTest2"  
                        AutomationId="entTest2"  
                        FontSize="16"
                        FontAttributes="Bold"
                        Placeholder="0 - FFFF"
                        Text=""
                        TextChanged="NumberEntryTextChanged"
                        Focused="NumberEntryFocused"  
                        Unfocused="NumberEntryUnfocused">
                        <Entry.Triggers>
                            <EventTrigger Event="TextChanged">
                                <local:HexadecimalValidationTriggerAction MinValue="0" MaxValue="FFFF" BorderName="brdValue2"/>
                            </EventTrigger>
                        </Entry.Triggers>
                    </Entry>
                </Border>

                <Border  
                    x:Name="brdValue3"
                    Grid.Column="0"
                    Grid.Row="3">

                    <Entry  
                        x:Name="entTest3"  
                        AutomationId="entTest3"  
                        FontSize="16"
                        FontAttributes="Bold"
                        Placeholder="0 - FFFFFF"
                        Text=""
                        TextChanged="NumberEntryTextChanged"
                        Focused="NumberEntryFocused"  
                        Unfocused="NumberEntryUnfocused">
                        <Entry.Triggers>
                            <EventTrigger Event="TextChanged">
                                <local:HexadecimalValidationTriggerAction MinValue="0" MaxValue="FFFFFF" BorderName="brdValue3"/>
                            </EventTrigger>
                        </Entry.Triggers>
                    </Entry>
                </Border>

                <Border  
                    x:Name="brdValue4"
                    Grid.Column="0"
                    Grid.Row="4">

                    <Entry  
                        x:Name="entTest4"  
                        AutomationId="entTest4"  
                        FontSize="16"
                        FontAttributes="Bold"
                        Placeholder="0 - FFFFFFFF"
                        Text=""
                        TextChanged="NumberEntryTextChanged"
                        Focused="NumberEntryFocused"  
                        Unfocused="NumberEntryUnfocused">
                        <Entry.Triggers>
                            <EventTrigger Event="TextChanged">
                                <local:HexadecimalValidationTriggerAction MinValue="0" MaxValue="FFFFFFFF" BorderName="brdValue4"/>
                            </EventTrigger>
                        </Entry.Triggers>
                    </Entry>
                </Border>

                <Label
                    Grid.Column="0"
                    Grid.Row="5"
                    HorizontalOptions="Center"
                    VerticalOptions="Center"
                    Text="Keyboard">
                </Label>

            </Grid>
        </ScrollView>

        <Grid>
            <bottomsheet:BottomSheet
                Style="{StaticResource BottomSheetKeyboard}"
                x:Name="KeyboardHexadecimalPortrait"
                Opened="KeyboardHexadecimal_Opened"
                Closed="KeyboardHexadecimal_Closed">
                <bottomsheet:BottomSheet.Content>
                    <bottomsheet:BottomSheetContent>
                        <bottomsheet:BottomSheetContent.ContentTemplate>
                            <DataTemplate>
                                <VerticalStackLayout>
                                    <ContentView>
                                        <ContentView.Behaviors>
                                            <bottomsheet:BottomSheetPeekBehavior />
                                        </ContentView.Behaviors>
                                        <Grid  
                                            ColumnDefinitions="Auto, Auto, Auto, Auto, Auto"  
                                            RowDefinitions="Auto, Auto, Auto, Auto"  
                                            ColumnSpacing="2"  
                                            RowSpacing="2"  
                                            Margin="5"
                                            HorizontalOptions="Center">

                                            <Border
                                                Style="{StaticResource KeyBorder}"
                                                Grid.Column="0"  
                                                Grid.Row="0">

                                                <Button  
                                                    Style="{StaticResource KeyNumericPortraitButton}"
                                                    AutomationId="btnZero"
                                                    Text="0"
                                                    Clicked="BtnKey_Clicked">
                                                </Button>
                                            </Border>

                                            <Border
                                                Style="{StaticResource KeyBorder}"
                                                Grid.Column="1"  
                                                Grid.Row="0">

                                                <Button  
                                                    Style="{StaticResource KeyNumericPortraitButton}"
                                                    AutomationId="btnOne"
                                                    Text="1"
                                                    Clicked="BtnKey_Clicked">
                                                </Button>
                                            </Border>

                                            <Border
                                                Style="{StaticResource KeyBorder}"
                                                Grid.Column="2"  
                                                Grid.Row="0">

                                                <Button  
                                                    Style="{StaticResource KeyNumericPortraitButton}"
                                                    AutomationId="btnTwo"
                                                    Text="2"
                                                    Clicked="BtnKey_Clicked">
                                                </Button>
                                            </Border>

                                            <Border
                                                Style="{StaticResource KeyBorder}"
                                                Grid.Column="3"  
                                                Grid.Row="0">

                                                <Button  
                                                    Style="{StaticResource KeyNumericPortraitButton}"
                                                    AutomationId="btnThree"
                                                    Text="3"
                                                    Clicked="BtnKey_Clicked">
                                                </Button>
                                            </Border>

                                            <Border
                                                Style="{StaticResource KeyBorder}"
                                                Grid.Column="4"  
                                                Grid.Row="0">

                                                <Button  
                                                    Style="{StaticResource KeyNumericPortraitButton}"
                                                    AutomationId="btnFour"
                                                    Text="4"
                                                    Clicked="BtnKey_Clicked">
                                                </Button>
                                            </Border>

                                            <Border
                                                Style="{StaticResource KeyBorder}"
                                                Grid.Column="0"  
                                                Grid.Row="1">

                                                <Button  
                                                    Style="{StaticResource KeyNumericPortraitButton}"
                                                    AutomationId="btnFive"
                                                    Text="5"
                                                    Clicked="BtnKey_Clicked">
                                                </Button>
                                            </Border>

                                            <Border
                                                Style="{StaticResource KeyBorder}"
                                                Grid.Column="1"  
                                                Grid.Row="1">

                                                <Button  
                                                    Style="{StaticResource KeyNumericPortraitButton}"
                                                    AutomationId="btnSix"
                                                    Text="6"
                                                    Clicked="BtnKey_Clicked">
                                                </Button>
                                            </Border>

                                            <Border
                                                Style="{StaticResource KeyBorder}"
                                                Grid.Column="2"  
                                                Grid.Row="1">

                                                <Button  
                                                    Style="{StaticResource KeyNumericPortraitButton}"
                                                    AutomationId="btnSeven"
                                                    Text="7"
                                                    Clicked="BtnKey_Clicked">
                                                </Button>
                                            </Border>

                                            <Border
                                                Style="{StaticResource KeyBorder}"
                                                Grid.Column="3"  
                                                Grid.Row="1">

                                                <Button  
                                                    Style="{StaticResource KeyNumericPortraitButton}"
                                                    AutomationId="btnEight"
                                                    Text="8"
                                                    Clicked="BtnKey_Clicked">
                                                </Button>
                                            </Border>

                                            <Border
                                                Style="{StaticResource KeyBorder}"
                                                Grid.Column="4"  
                                                Grid.Row="1">

                                                <Button  
                                                    Style="{StaticResource KeyNumericPortraitButton}"
                                                    AutomationId="btnNine"
                                                    Text="9"
                                                    Clicked="BtnKey_Clicked">
                                                </Button>
                                            </Border>

                                            <Border
                                                Style="{StaticResource KeyBorder}"
                                                Grid.Column="0"  
                                                Grid.Row="2">

                                                <Button  
                                                    Style="{StaticResource KeyNumericPortraitButton}"
                                                    AutomationId="btnA"
                                                    Text="A"
                                                    Clicked="BtnKey_Clicked">
                                                </Button>
                                            </Border>

                                            <Border
                                                Style="{StaticResource KeyBorder}"
                                                Grid.Column="1"  
                                                Grid.Row="2">

                                                <Button  
                                                    Style="{StaticResource KeyNumericPortraitButton}"
                                                    AutomationId="btnB"
                                                    Text="B"
                                                    Clicked="BtnKey_Clicked">
                                                </Button>
                                            </Border>

                                            <Border
                                                Style="{StaticResource KeyBorder}"
                                                Grid.Column="2"  
                                                Grid.Row="2">

                                                <Button  
                                                    Style="{StaticResource KeyNumericPortraitButton}"
                                                    AutomationId="btnC"
                                                    Text="C"
                                                    Clicked="BtnKey_Clicked">
                                                </Button>
                                            </Border>

                                            <Border
                                                Style="{StaticResource KeyBorder}"
                                                Grid.Column="3"  
                                                Grid.Row="2">

                                                <Button  
                                                    Style="{StaticResource KeyNumericPortraitButton}"
                                                    AutomationId="btnD"
                                                    Text="D"
                                                    Clicked="BtnKey_Clicked">
                                                </Button>
                                            </Border>

                                            <Border
                                                Style="{StaticResource KeyBorder}"
                                                Grid.Column="4"  
                                                Grid.Row="2">

                                                <Button  
                                                    Style="{StaticResource KeyNumericPortraitButton}"
                                                    AutomationId="btnE"
                                                    Text="E"
                                                    Clicked="BtnKey_Clicked">
                                                </Button>
                                            </Border>

                                            <Border
                                                Style="{StaticResource KeyBorder}"
                                                Grid.Column="0"  
                                                Grid.Row="3">

                                                <Button  
                                                    Style="{StaticResource KeyNumericPortraitButton}"
                                                    AutomationId="btnF"
                                                    Text="F"
                                                    Clicked="BtnKey_Clicked">
                                                </Button>
                                            </Border>

                                            <Border
                                                Style="{StaticResource KeyBorder}"
                                                Grid.Column="1"  
                                                Grid.Row="3">

                                                <Button  
                                                    Style="{StaticResource KeyNumericPortraitButton}"
                                                    AutomationId="btnDecimalPoint"
                                                    BackgroundColor="Transparent"
                                                    Text=""
                                                    IsEnabled="False"
                                                    Clicked="BtnKey_Clicked">
                                                </Button>
                                            </Border>

                                            <Border
                                                Style="{StaticResource KeyBorder}"
                                                Grid.Column="2"  
                                                Grid.Row="3">

                                                <Button  
                                                    Style="{StaticResource KeyNumericPortraitButton}"
                                                    AutomationId="btnMinus"
                                                    BackgroundColor="Transparent"
                                                    Text=""
                                                    IsEnabled="False"
                                                    Clicked="BtnKey_Clicked">
                                                </Button>
                                            </Border>

                                            <Border
                                                Style="{StaticResource KeyBorder}"
                                                Grid.Column="3"  
                                                Grid.Row="3">

                                                <ImageButton  
                                                    Style="{StaticResource KeyNumericPortraitImageButton}"
                                                    AutomationId="btnBackspace"
                                                    Source="{AppThemeBinding Light=backspace_32p_black.png, Dark=backspace_32p_white.png}"
                                                    Clicked="BtnKey_Clicked">
                                                </ImageButton>
                                            </Border>

                                            <Border
                                                Style="{StaticResource KeyBorder}"
                                                Grid.Column="4"  
                                                Grid.Row="3">

                                                <ImageButton  
                                                    Style="{StaticResource KeyNumericPortraitImageButton}"
                                                    AutomationId="btnReturn"
                                                    Source="{AppThemeBinding Light=keyboard_tab_32p_black.png, Dark=keyboard_tab_32p_white.png}"
                                                    Clicked="BtnKey_Clicked">
                                                </ImageButton>
                                            </Border>

                                        </Grid>
                                    </ContentView>
                                </VerticalStackLayout>
                            </DataTemplate>
                        </bottomsheet:BottomSheetContent.ContentTemplate>
                    </bottomsheet:BottomSheetContent>
                </bottomsheet:BottomSheet.Content>
            </bottomsheet:BottomSheet>
        </Grid>

        <Grid>
            <bottomsheet:BottomSheet
                Style="{StaticResource BottomSheetKeyboard}"
                x:Name="KeyboardHexadecimalLandscape"
                Opened="KeyboardHexadecimal_Opened"
                Closed="KeyboardHexadecimal_Closed">
                <bottomsheet:BottomSheet.Content>
                    <bottomsheet:BottomSheetContent>
                        <bottomsheet:BottomSheetContent.ContentTemplate>
                            <DataTemplate>
                                <VerticalStackLayout>
                                    <ContentView>
                                        <ContentView.Behaviors>
                                            <bottomsheet:BottomSheetPeekBehavior />
                                        </ContentView.Behaviors>
                                        <Grid  
                                            ColumnDefinitions="2, Auto, Auto, Auto, Auto, Auto, Auto, Auto, Auto, Auto, Auto, 2"
                                            RowDefinitions="Auto, Auto"
                                            ColumnSpacing="2"  
                                            RowSpacing="2"  
                                            Margin="0,5,0,0"
                                            HorizontalOptions="Center">

                                            <Border
                                                Style="{StaticResource KeyBorder}"
                                                Grid.Column="1"  
                                                Grid.Row="0">

                                                <Button  
                                                    Style="{StaticResource KeyNumericLandscapeButton}"
                                                    AutomationId="btnZero"
                                                    Text="0"
                                                    Clicked="BtnKey_Clicked">
                                                </Button>
                                            </Border>

                                            <Border
                                                Style="{StaticResource KeyBorder}"
                                                Grid.Column="2"  
                                                Grid.Row="0">

                                                <Button  
                                                    Style="{StaticResource KeyNumericLandscapeButton}"
                                                    AutomationId="btnOne"
                                                    Text="1"
                                                    Clicked="BtnKey_Clicked">
                                                </Button>
                                            </Border>

                                            <Border
                                                Style="{StaticResource KeyBorder}"
                                                Grid.Column="3"  
                                                Grid.Row="0">

                                                <Button  
                                                    Style="{StaticResource KeyNumericLandscapeButton}"
                                                    AutomationId="btnTwo"
                                                    Text="2"
                                                    Clicked="BtnKey_Clicked">
                                                </Button>
                                            </Border>

                                            <Border
                                                Style="{StaticResource KeyBorder}"
                                                Grid.Column="4"  
                                                Grid.Row="0">

                                                <Button  
                                                    Style="{StaticResource KeyNumericLandscapeButton}"
                                                    AutomationId="btnThree"
                                                    Text="3"
                                                    Clicked="BtnKey_Clicked">
                                                </Button>
                                            </Border>

                                            <Border
                                                Style="{StaticResource KeyBorder}"
                                                Grid.Column="5"  
                                                Grid.Row="0">

                                                <Button  
                                                    Style="{StaticResource KeyNumericLandscapeButton}"
                                                    AutomationId="btnFour"
                                                    Text="4"
                                                    Clicked="BtnKey_Clicked">
                                                </Button>
                                            </Border>

                                            <Border
                                                Style="{StaticResource KeyBorder}"
                                                Grid.Column="6"  
                                                Grid.Row="0">

                                                <Button  
                                                    Style="{StaticResource KeyNumericLandscapeButton}"
                                                    AutomationId="btnFive"
                                                    Text="5"
                                                    Clicked="BtnKey_Clicked">
                                                </Button>
                                            </Border>

                                            <Border
                                                Style="{StaticResource KeyBorder}"
                                                Grid.Column="7"  
                                                Grid.Row="0">

                                                <Button  
                                                    Style="{StaticResource KeyNumericLandscapeButton}"
                                                    AutomationId="btnSix"
                                                    Text="6"
                                                    Clicked="BtnKey_Clicked">
                                                </Button>
                                            </Border>

                                            <Border
                                                Style="{StaticResource KeyBorder}"
                                                Grid.Column="8"  
                                                Grid.Row="0">

                                                <Button  
                                                    Style="{StaticResource KeyNumericLandscapeButton}"
                                                    AutomationId="btnSeven"
                                                    Text="7"
                                                    Clicked="BtnKey_Clicked">
                                                </Button>
                                            </Border>

                                            <Border
                                                Style="{StaticResource KeyBorder}"
                                                Grid.Column="9"  
                                                Grid.Row="0">

                                                <Button  
                                                    Style="{StaticResource KeyNumericLandscapeButton}"
                                                    AutomationId="btnEight"
                                                    Text="8"
                                                    Clicked="BtnKey_Clicked">
                                                </Button>
                                            </Border>

                                            <Border
                                                Style="{StaticResource KeyBorder}"
                                                Grid.Column="10"  
                                                Grid.Row="0">

                                                <Button  
                                                    Style="{StaticResource KeyNumericLandscapeButton}"
                                                    AutomationId="btnNine"
                                                    Text="9"
                                                    Clicked="BtnKey_Clicked">
                                                </Button>
                                            </Border>

                                            <Border
                                                Style="{StaticResource KeyBorder}"
                                                Grid.Column="1"  
                                                Grid.Row="1">

                                                <Button  
                                                    Style="{StaticResource KeyNumericLandscapeButton}"
                                                    AutomationId="btnA"
                                                    Text="A"
                                                    Clicked="BtnKey_Clicked">
                                                </Button>
                                            </Border>

                                            <Border
                                                Style="{StaticResource KeyBorder}"
                                                Grid.Column="2"  
                                                Grid.Row="1">

                                                <Button  
                                                    Style="{StaticResource KeyNumericLandscapeButton}"
                                                    AutomationId="btnB"
                                                    Text="B"
                                                    Clicked="BtnKey_Clicked">
                                                </Button>
                                            </Border>

                                            <Border
                                                Style="{StaticResource KeyBorder}"
                                                Grid.Column="3"  
                                                Grid.Row="1">

                                                <Button  
                                                    Style="{StaticResource KeyNumericLandscapeButton}"
                                                    AutomationId="btnC"
                                                    Text="C"
                                                    Clicked="BtnKey_Clicked">
                                                </Button>
                                            </Border>

                                            <Border
                                                Style="{StaticResource KeyBorder}"
                                                Grid.Column="4"  
                                                Grid.Row="1">

                                                <Button  
                                                    Style="{StaticResource KeyNumericLandscapeButton}"
                                                    AutomationId="btnD"
                                                    Text="D"
                                                    Clicked="BtnKey_Clicked">
                                                </Button>
                                            </Border>

                                            <Border
                                                Style="{StaticResource KeyBorder}"
                                                Grid.Column="5"  
                                                Grid.Row="1">

                                                <Button  
                                                    Style="{StaticResource KeyNumericLandscapeButton}"
                                                    AutomationId="btnE"
                                                    Text="E"
                                                    Clicked="BtnKey_Clicked">
                                                </Button>
                                            </Border>

                                            <Border
                                                Style="{StaticResource KeyBorder}"
                                                Grid.Column="6"  
                                                Grid.Row="1">

                                                <Button  
                                                    Style="{StaticResource KeyNumericLandscapeButton}"
                                                    AutomationId="btnF"
                                                    Text="F"
                                                    Clicked="BtnKey_Clicked">
                                                </Button>
                                            </Border>

                                            <Border
                                                Style="{StaticResource KeyBorder}"
                                                Grid.Column="7"  
                                                Grid.Row="1">

                                                <Button  
                                                    Style="{StaticResource KeyNumericLandscapeButton}"
                                                    AutomationId="btnDecimalPoint"
                                                    BackgroundColor="Transparent"
                                                    Text=""
                                                    IsEnabled="False"
                                                    Clicked="BtnKey_Clicked">
                                                </Button>
                                            </Border>

                                            <Border
                                                Style="{StaticResource KeyBorder}"
                                                Grid.Column="8"  
                                                Grid.Row="1">

                                                <Button  
                                                    Style="{StaticResource KeyNumericLandscapeButton}"
                                                    AutomationId="btnMinus"
                                                    BackgroundColor="Transparent"
                                                    Text=""
                                                    IsEnabled="False"
                                                    Clicked="BtnKey_Clicked">
                                                </Button>
                                            </Border>

                                            <Border
                                                Style="{StaticResource KeyBorder}"
                                                Grid.Column="9"  
                                                Grid.Row="1">

                                                <ImageButton  
                                                    Style="{StaticResource KeyNumericLandscapeImageButton}"
                                                    AutomationId="btnBackspace"
                                                    Source="{AppThemeBinding Light=backspace_32p_black.png, Dark=backspace_32p_white.png}"
                                                    Clicked="BtnKey_Clicked">
                                                </ImageButton>
                                            </Border>

                                            <Border
                                                Style="{StaticResource KeyBorder}"
                                                Grid.Column="10"  
                                                Grid.Row="1">

                                                <ImageButton  
                                                    Style="{StaticResource KeyNumericLandscapeImageButton}"
                                                    AutomationId="btnReturn"
                                                    Source="{AppThemeBinding Light=keyboard_tab_32p_black.png, Dark=keyboard_tab_32p_white.png}"
                                                    Clicked="BtnKey_Clicked">
                                                </ImageButton>
                                            </Border>

                                        </Grid>
                                    </ContentView>
                                </VerticalStackLayout>
                            </DataTemplate>
                        </bottomsheet:BottomSheetContent.ContentTemplate>
                    </bottomsheet:BottomSheetContent>
                </bottomsheet:BottomSheet.Content>
            </bottomsheet:BottomSheet>
        </Grid>
    </StackLayout>
</ContentPage>